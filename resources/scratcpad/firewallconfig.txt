**Enterprise Network and Firewall Configuration for Atlassian Webhook Integration**

**1. Architectural Overview: The Inbound "Hot Call" Model**
Standard Model Context Protocol (MCP) interactions typically utilize an outbound-only architecture where the MCP server polls the Atlassian API. However, enabling "hot calls"—technically referred to as **Webhooks** or **Asynchronous Callbacks**—inverts this model.

In this configuration, the Atlassian Cloud infrastructure initiates a connection to the enterprise MCP server to deliver real-time event payloads (e.g., `page_created`, `page_updated`). This necessitates an **Inbound** traffic configuration, requiring strict firewall, routing, and security policy modifications to expose the MCP endpoint safely to the public internet.

**2. Network Perimeter Requirements**

* **Public Reachability:** Atlassian Cloud cannot route traffic to private RFC 1918 addresses (e.g., `10.x.x.x`, `192.168.x.x`) or `localhost`. The MCP server, or its ingress controller, must be accessible via a publicly resolvable DNS record (e.g., `mcp-api.enterprise.com`).
* **Reverse Proxy / DMZ Termination:** In enterprise environments, it is standard practice to rarely expose the application server directly. Traffic should terminate at a Reverse Proxy, Load Balancer, or API Gateway (e.g., AWS API Gateway, NGINX, F5) located in the DMZ. This intermediary handles SSL termination and traffic inspection before forwarding the request to the internal MCP server.

**3. Firewall Configuration (Layer 3 & 4)**

To permit the inbound webhook traffic while maintaining security posture, the perimeter firewall must be configured with a strict Allowlist (Whitelist) policy.

* **Protocol & Port:** Atlassian strictly mandates **HTTPS** over **TCP Port 443**.
* *Note:* Traffic on Port 80 (HTTP) will fail; Atlassian webhooks do not support unencrypted transport.


* **Source IP Filtering:** To prevent unauthorized entities from probing the endpoint, the firewall should accept traffic *only* from known Atlassian IP blocks. Atlassian publishes and rotates these CIDR blocks dynamically.
* **Source Definition:** The configuration must reference the official JSON list provided by Atlassian at `https://ip-ranges.atlassian.com/`.
* **Automation:** Enterprise infrastructure code (Terraform/Ansible) should be implemented to periodically ingest this JSON list and update firewall rules, as Atlassian may modify these ranges without explicit notification.



**4. Transport Layer Security (TLS)**

The endpoint receiving the "hot call" must present a valid TLS certificate.

* **Certificate Authority (CA):** The certificate must be issued by a public, trusted Certificate Authority (e.g., DigiCert, Let's Encrypt).
* **Self-Signed Certificates:** These are **rejected** by Atlassian's outbound dispatchers. The handshake will fail, and the webhook will not be delivered.
* **Cipher Suites:** The server must support modern TLS versions (TLS 1.2 or 1.3) and secure cipher suites.

**5. Application Layer Security (Layer 7)**

While the firewall restricts *who* can connect (IP address), it cannot verify *what* is being sent. Because IP spoofing is technically possible, reliance on firewall rules alone is insufficient for enterprise security.

* **Secret Verification:** The MCP server implementation must verify the payload signature. Atlassian webhooks typically include a JWT (JSON Web Token) or a shared secret in the request headers (e.g., `Authorization` header or specific `X-Atlassian-Token` signatures).
* **Payload Validation:** The application logic must validate that the incoming request actually originated from the specific tenant (Atlassian instance) authorized to trigger the server, discarding any requests that match the IP Allowlist but fail cryptographic verification.

**Summary Configuration Table**

| Configuration Parameter | Specification |
| --- | --- |
| **Traffic Direction** | Inbound (Ingress) |
| **Protocol** | HTTPS (TLS 1.2+) |
| **Port** | 443 |
| **Source Address** | `ip-ranges.atlassian.com` (Filter by `items[].cidr`) |
| **Certificate Requirement** | Public Trusted CA (No Self-Signed) |
| **Timeout Constraints** | Atlassian expects a `200 OK` response within 10 seconds. |
